<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Светосила - Документация проекта</title>
    <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome (needed for Mermaid fa:* icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <script>
        // Mermaid config for main page diagrams
        window.mermaid = {
            startOnLoad: true,
            theme: "default",
            securityLevel: "loose"
        };
    </script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>
</head>
<body>
    <!-- Logo Bar -->
    <div class="logo-bar">
        <div class="logo-bar-container">
            <a href="index.html" style="margin-left: 10px;">
                <img src="assets/img/SvetosilaLogoFull.PNG" alt="Светосила" class="logo">
            </a>
            <div style="display: flex; align-items: center; gap: 20px;">
                <a href="https://github.com/KhudyakovAlex/Svetosila" target="_blank" class="github-link" style="margin-right: 10px;">GitHub →</a>
            </div>
        </div>
    </div>

    <!-- Progress Hero Block -->
    <div class="hero-grid">
        <!-- Ship log -->
        <div class="hero-log">
            <h3>Дневник коротышек</h3>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <div class="log-entry">
                <span class="log-date">2025-12-26 12:17</span>
                <p class="log-text">Опробован и вчерне реализован механизм редактирования объектов на карте: <a href="assets/video/SVETOSILA.mp4" target="_blank">Жмякай сюды</a></p>
            </div>
            <div class="log-entry">
                <span class="log-date">2025-12-24 09:41</span>
                <p class="log-text">На данный момент рабочий вариант по картографии: <a href="https://maplibre.org/maplibre-gl-js/docs/" target="_blank">Жмякай сюды</a>. Ко многим инновациям в перспективе обещающий! Пример 3D indoor mapping: <a href="https://maplibre.org/maplibre-gl-js/docs/examples/extrude-polygons-for-3d-indoor-mapping.html" target="_blank">Жмякай сюды</a>.</p>
            </div>
        </div>

        <!-- Ship + Progress Info -->
        <div class="hero-center">
            <img id="stage-image" alt="Этап строительства" style="opacity: 0; transition: opacity 0.3s ease;">
            <div class="hero-progress">
                <div style="display: flex; align-items: baseline; gap: 14px; margin-bottom: 18px;">
                    <span id="progress-percent" style="font-size: 4.2em; font-weight: 300; color: var(--accent-orange); line-height: 1;">0%</span>
                    <span style="font-size: 1.32em; color: #6c757d; font-weight: 400;">готовности</span>
                </div>
                
                <div style="background: #dee2e6; border-radius: 12px; height: 24px; overflow: hidden; margin-bottom: 18px;">
                    <div id="progress-bar" style="background: linear-gradient(90deg, var(--accent-orange), #ffab4c); height: 100%; width: 0%; border-radius: 12px; transition: width 1s ease-out;"></div>
                </div>
                
                <div>
                    <span style="font-size: 1em; color: #495057;">
                        <strong id="days-left" style="color: var(--accent-orange); font-size: 1.8em;">—</strong> дн. до старта ракеты
                    </span>
                </div>
            </div>
        </div>

        <!-- Status Column -->
        <div class="hero-status-panel">
            <div class="status-block">
                <h3>Отложено на <s>завтра</s> послезавтра</h3>
                <ul>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <li>UX-дизайн страниц.</li>
</ul>
            </div>
            
            <div class="status-block">
                <h3>Прям сейчас делаем</h3>
                <ul>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <li>Делаем систему контроля доступа (Худяков).</li>
                    <li>ТЗ (Худяков).</li>
</ul>
            </div>
            
            <div class="status-block">
                <h3>Готовченко</h3>
                <ul>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <li>Редактирование объектов на карте (Деркач).</li>
                    <li>Определились с картографией.</li>
                    <li>Определились с фронтенд-фреймворком — Vue.</li>
                    <li>Предварительно определен логотип.</li>
</ul>
            </div>
        </div>
    </div>

    <script>
    (function() {
        const startDate = new Date('2025-12-15');
        const endDate = new Date('2026-02-27');
        const today = new Date();
        
        const totalDays = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
        const daysPassed = Math.ceil((today - startDate) / (1000 * 60 * 60 * 24));
        const daysLeft = Math.max(0, Math.ceil((endDate - today) / (1000 * 60 * 60 * 24)));
        
        let percent = Math.min(100, Math.max(0, Math.round((daysPassed / totalDays) * 100)));
        
        // Выбор картинки: 0-9 в зависимости от процента (0-9% = 0.png, 10-19% = 1.png, ...)
        const imageIndex = Math.min(9, Math.floor(percent / 10));
        
        // Обновляем DOM после загрузки
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('progress-percent').textContent = percent + '%';
            document.getElementById('days-left').textContent = daysLeft;
            
            // Загружаем картинку и показываем после загрузки
            const stageImage = document.getElementById('stage-image');
            stageImage.onload = function() {
                stageImage.style.opacity = '1';
            };
            stageImage.src = 'Stages/' + imageIndex + '.png';
            
            // Анимация прогресс-бара
            setTimeout(function() {
                document.getElementById('progress-bar').style.width = percent + '%';
            }, 100);
        });
    })();
    </script>

    <!-- Main Container -->
    <div class="main-container">
        <!-- PROJECT_SCHEME_START -->
        <div class="section project-scheme">
            <h2>Схема АПК</h2>
            <div class="mermaid">
flowchart LR

CW(Клиент АПК<br>Веб)
CD(Клиент АПК<br>ПК)
CM(Клиент АПК<br>Телефон/планшет)
CVW(Клиент АПК<br>Видеостена)

  CW <--LAN<br>или<br>Internet--> S
  CD <--LAN<br>или<br>Internet--> S
  CM <--LAN<br>или<br>Internet--> S
  CVW <--LAN<br>или<br>Internet--> S

S[(Сервер АПК)]

   S <--Internet--> O

O@{ shape: tri, label: "Оператор<br>сотовой<br>связи" }

  O <--GSM--> R1
  O <--GSM--> R2

TP1(Точка<br>подключения)
  TP1 ==220В==> AV1

subgraph ШУНО - LoRaWAN
  R1(Контроллер<br>RAPIDA)
  LW(LoRaWAN<br>база)
  AV1(Выключатель)
end
R1 <---> LW
R1 <---> AV1
AV1 ==220В==> CB2
LW <-. LoRaWAN .-> LW1
LW <-. LoRaWAN .-> LW2

CB2@{ shape: f-circ, label: "" }

  CB2 ===> LUM3
  CB2 ===> LUM4

subgraph  
  LW1(LoRaWAN<br>модуль)
  LUM3((Светильник))
end

subgraph  
  LW2(LoRaWAN<br>модуль)
  LUM4((Светильник))
end

LW1 <---> LUM3
LW2 <---> LUM4



TP2(Точка<br>подключения)
  TP2 ==220В==> AV2

subgraph ШУНО - PLC
  R2(Контроллер<br>RAPIDA)
  PLC(PLC<br>база)
  AV2(Выключатель)
  B1@{ shape: f-circ, label: "" }
end
R2 <---> PLC
R2 <---> AV2
PLC <---> B1
AV2 ===> B1

B1 ==220В<br>+<br>PLC==> CB1

CB1@{ shape: f-circ, label: "" }

  CB1 ===> PLC1
  CB1 ===> PLC2

subgraph
  PLC1(PLC<br>модуль)
  LUM1((Светильник))
end

subgraph
  PLC2(PLC<br>модуль)
  LUM2((Светильник))  
end

  PLC1 <---> LUM1
  PLC1 ===> LUM1
  PLC2 <---> LUM2
  PLC2 ===> LUM2
            </div>
        </div>
        <!-- PROJECT_SCHEME_END -->

        <!-- ТЗ Section -->
        <div class="section">
            <h2>ТЗ</h2>
            <div class="doc-grid">
                <a href="../../PRD/SvetosilaPRD.md" class="doc-card">
                    <div class="title">Техническое задание</div>
                    <div class="description">Markdown-версия (пока пустое)</div>
                </a>
                <a href="../../PRD/ТЗ_АСУНО_В21082025_1этап_коментари_Черменского_ПП_ред.docx" class="doc-card">
                    <div class="title">Техническое задание (DOC-файл)</div>
                    <div class="description">ТЗ АСУНО В21082025, 1 этап, комментарии Черменского ПП ред.</div>
                </a>
            </div>
        </div>

        <!-- Backend Section -->
        <div class="section">
            <h2>Backend</h2>
            <div class="doc-grid">
                <a href="PDS/SvetosilaPDS_DB.html" class="doc-card">
                    <div class="title">Структура базы данных</div>
                    <div class="description">Описание таблиц, связей и модели данных системы Светосила</div>
                </a>
                <a href="PDS/SvetosilaPDS_DB_AC.html" class="doc-card">
                    <div class="title">Контроль доступа</div>
                    <div class="description">Пользователи, роли, права и иерархия доступа</div>
                </a>
            </div>
        </div>

        <!-- Дизайн Section -->
        <div class="section">
            <h2>Дизайн</h2>
            <div class="doc-grid">
                <a href="DESIGN/Logo.html" class="doc-card">
                    <div class="title">Логотипы</div>
                    <div class="description">Варианты логотипов системы Светосила (PNG, SVG, JPG)</div>
                </a>
                <a href="DESIGN/Style.html" class="doc-card">
                    <div class="title">Стили</div>
                    <div class="description">Варианты стилей оформления интерфейса</div>
                </a>
            </div>
        </div>

    </div>
</body>
</html>

